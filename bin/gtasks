#!/usr/bin/env ruby
# encoding: utf-8
# Author: kimoto
require 'gtasks'
require 'logger'

if $0 == __FILE__
  sub_command = ARGV.shift || 'list'
  cli = GoogleTaskCLI.new(
    :client_id => '',
    :client_secret => '',
    #:logger => Logger.new(STDERR),
    :no_refresh => true
  )

  case sub_command
  when 'list'
    cli.list(ARGV.shift || 'default')
  when 'lists'
    cli.lists
  when 'add'
    raise ArgumentError if ARGV.empty?
    cli.add(ARGV.join(' '))
  when 'clear'
    cli.clear
  when 'done'
    param = ARGV.shift or raise ArgumentError
    cli.done(param)
  when 'delete'
    param = ARGV.shift or raise ArgumentError
    cli.delete(param)
  when 'choice'
    cli.choice
  else
    raise ArgumentError
  end
end
